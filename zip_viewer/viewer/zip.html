<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>zip Viewer</title>
    <style>
      body[theme="LIGHT"],
      body[theme="LIGHTGRAY"] {
        color: black;
      }

      body[theme="GRAY"],
      body[theme="BLUE"],
      body[theme="PURPLE"],
      body[theme="DARK"] {
        color: white;
      }
      * {
        box-sizing: border-box;
      }
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      #images p {
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }
    </style>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script async src="https://ga.jspm.io/npm:es-module-shims@1.7.0/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.3.1?dev",
        "react-redux": "https://esm.sh/react-redux@9.1.2?dev",
        "@reduxjs/toolkit": "https://esm.sh/@reduxjs/toolkit@2.4.0?dev",
        "react-dom/client": "https://esm.sh/react-dom@18.3.1/client?dev",
        "react-use": "https://esm.sh/react-use@17.5.1?dev",
        "react-router-dom": "https://esm.sh/react-router-dom@7.0.2?dev",
        "file-type": "https://esm.sh/file-type@19.6.0?dev",
        "pdfjs": "https://cdn.jsdelivr.net/npm/pdfjs-dist@3.1.81/+esm"
      }
    }
    </script>
  </head>
  <body>
    <div id="root"></div>
  </body>
  <script>
    const setTheme = () => {
      const theme = window.eagle.app.theme
      if (theme) {
        document.body.setAttribute('theme', theme)
      } else {
        setTimeout(() => {
          const theme = window.eagle.app.theme
          if (theme) {
            document.body.setAttribute('theme', theme)
          }
        }, 200)
      }
    }

    eagle.onPluginCreate((_) => {
      setTheme()
      return  window.createdEaglePlugin = true
    })

    eagle.onPluginRun((_) => {
      setTheme()
    })
    eagle.onPluginShow(() => {
      setTheme()
    })

    eagle.onThemeChanged((theme) => {
      console.log(witheme)
      document.body.setAttribute('theme', theme)
    })
  </script>
  <script type="text/babel" data-type="module" src="initialize.js"></script>
  <!-- components -->
  <script type="text/babel" data-type="module" src="AudioPlayer.jsx"></script>
  <script type="text/babel" data-type="module" src="PdfViewer.jsx"></script>
  <script type="text/babel" data-type="module" src="VideoPlayer.jsx"></script>
  <!-- entry -->
  <script type="text/babel" data-type="module" src="App.jsx"></script>
</html>